// leaflet.markercluster@1.5.3 downloaded from https://ga.jspm.io/npm:leaflet.markercluster@1.5.3/dist/leaflet.markercluster-src.js

var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,i){i(t)})(0,(function(t){var i=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:false,spiderfyOnMaxZoom:true,showCoverageOnHover:true,zoomToBoundsOnClick:true,singleMarkerMode:false,disableClusteringAtZoom:null,removeOutsideVisibleBounds:true,animate:true,animateAddingMarkers:false,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:false,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this||e,t);(this||e).options.iconCreateFunction||((this||e).options.iconCreateFunction=(this||e)._defaultIconCreateFunction);(this||e)._featureGroup=L.featureGroup();(this||e)._featureGroup.addEventParent(this||e);(this||e)._nonPointGroup=L.featureGroup();(this||e)._nonPointGroup.addEventParent(this||e);(this||e)._inZoomAnimation=0;(this||e)._needsClustering=[];(this||e)._needsRemoving=[];(this||e)._currentShownBounds=null;(this||e)._queue=[];(this||e)._childMarkerEventHandlers={dragstart:(this||e)._childMarkerDragStart,move:(this||e)._childMarkerMoved,dragend:(this||e)._childMarkerDragEnd};var i=L.DomUtil.TRANSITION&&(this||e).options.animate;L.extend(this||e,i?(this||e)._withAnimation:(this||e)._noAnimation);(this||e)._markerCluster=i?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng){(this||e)._nonPointGroup.addLayer(t);this.fire("layeradd",{layer:t});return this||e}if(!(this||e)._map){(this||e)._needsClustering.push(t);this.fire("layeradd",{layer:t});return this||e}if(this.hasLayer(t))return this||e;(this||e)._unspiderfy&&this._unspiderfy();this._addLayer(t,(this||e)._maxZoom);this.fire("layeradd",{layer:t});(this||e)._topClusterLevel._recalculateBounds();this._refreshClustersIcons();var i=t,r=(this||e)._zoom;if(t.__parent)while(i.__parent._zoom>=r)i=i.__parent;(this||e)._currentShownBounds.contains(i.getLatLng())&&((this||e).options.animateAddingMarkers?this._animationAddLayer(t,i):this._animationAddLayerNonAnimated(t,i));return this||e},removeLayer:function(t){if(t instanceof L.LayerGroup)return this.removeLayers([t]);if(!t.getLatLng){(this||e)._nonPointGroup.removeLayer(t);this.fire("layerremove",{layer:t});return this||e}if(!(this||e)._map){!this._arraySplice((this||e)._needsClustering,t)&&this.hasLayer(t)&&(this||e)._needsRemoving.push({layer:t,latlng:t._latlng});this.fire("layerremove",{layer:t});return this||e}if(!t.__parent)return this||e;if((this||e)._unspiderfy){this._unspiderfy();this._unspiderfyLayer(t)}this._removeLayer(t,true);this.fire("layerremove",{layer:t});(this||e)._topClusterLevel._recalculateBounds();this._refreshClustersIcons();t.off((this||e)._childMarkerEventHandlers,this||e);if((this||e)._featureGroup.hasLayer(t)){(this||e)._featureGroup.removeLayer(t);t.clusterShow&&t.clusterShow()}return this||e},addLayers:function(t,i){if(!L.Util.isArray(t))return this.addLayer(t);var r,n=(this||e)._featureGroup,s=(this||e)._nonPointGroup,o=(this||e).options.chunkedLoading,a=(this||e).options.chunkInterval,l=(this||e).options.chunkProgress,h=t.length,u=0,_=true;if((this||e)._map){var d=(new Date).getTime();var f=L.bind((function(){var p=(new Date).getTime();(this||e)._map&&(this||e)._unspiderfy&&this._unspiderfy();for(;u<h;u++){if(o&&u%200===0){var c=(new Date).getTime()-p;if(c>a)break}r=t[u];if(r instanceof L.LayerGroup){if(_){t=t.slice();_=false}this._extractNonGroupLayers(r,t);h=t.length}else if(r.getLatLng){if(!this.hasLayer(r)){this._addLayer(r,(this||e)._maxZoom);i||this.fire("layeradd",{layer:r});if(r.__parent&&2===r.__parent.getChildCount()){var m=r.__parent.getAllChildMarkers(),g=m[0]===r?m[1]:m[0];n.removeLayer(g)}}}else{s.addLayer(r);i||this.fire("layeradd",{layer:r})}}l&&l(u,h,(new Date).getTime()-d);if(u===h){(this||e)._topClusterLevel._recalculateBounds();this._refreshClustersIcons();(this||e)._topClusterLevel._recursivelyAddChildrenToMap(null,(this||e)._zoom,(this||e)._currentShownBounds)}else setTimeout(f,(this||e).options.chunkDelay)}),this||e);f()}else{var p=(this||e)._needsClustering;for(;u<h;u++){r=t[u];if(r instanceof L.LayerGroup){if(_){t=t.slice();_=false}this._extractNonGroupLayers(r,t);h=t.length}else r.getLatLng?this.hasLayer(r)||p.push(r):s.addLayer(r)}}return this||e},removeLayers:function(t){var i,r,n=t.length,s=(this||e)._featureGroup,o=(this||e)._nonPointGroup,a=true;if(!(this||e)._map){for(i=0;i<n;i++){r=t[i];if(r instanceof L.LayerGroup){if(a){t=t.slice();a=false}this._extractNonGroupLayers(r,t);n=t.length}else{this._arraySplice((this||e)._needsClustering,r);o.removeLayer(r);this.hasLayer(r)&&(this||e)._needsRemoving.push({layer:r,latlng:r._latlng});this.fire("layerremove",{layer:r})}}return this||e}if((this||e)._unspiderfy){this._unspiderfy();var l=t.slice(),h=n;for(i=0;i<h;i++){r=l[i];if(r instanceof L.LayerGroup){this._extractNonGroupLayers(r,l);h=l.length}else this._unspiderfyLayer(r)}}for(i=0;i<n;i++){r=t[i];if(r instanceof L.LayerGroup){if(a){t=t.slice();a=false}this._extractNonGroupLayers(r,t);n=t.length}else if(r.__parent){this._removeLayer(r,true,true);this.fire("layerremove",{layer:r});if(s.hasLayer(r)){s.removeLayer(r);r.clusterShow&&r.clusterShow()}}else{o.removeLayer(r);this.fire("layerremove",{layer:r})}}(this||e)._topClusterLevel._recalculateBounds();this._refreshClustersIcons();(this||e)._topClusterLevel._recursivelyAddChildrenToMap(null,(this||e)._zoom,(this||e)._currentShownBounds);return this||e},clearLayers:function(){if(!(this||e)._map){(this||e)._needsClustering=[];(this||e)._needsRemoving=[];delete(this||e)._gridClusters;delete(this||e)._gridUnclustered}(this||e)._noanimationUnspiderfy&&this._noanimationUnspiderfy();(this||e)._featureGroup.clearLayers();(this||e)._nonPointGroup.clearLayers();this.eachLayer((function(t){t.off((this||e)._childMarkerEventHandlers,this||e);delete t.__parent}),this||e);(this||e)._map&&this._generateInitialClusters();return this||e},getBounds:function(){var t=new L.LatLngBounds;(this||e)._topClusterLevel&&t.extend((this||e)._topClusterLevel._bounds);for(var i=(this||e)._needsClustering.length-1;i>=0;i--)t.extend((this||e)._needsClustering[i].getLatLng());t.extend((this||e)._nonPointGroup.getBounds());return t},eachLayer:function(t,i){var r,n,s,o=(this||e)._needsClustering.slice(),a=(this||e)._needsRemoving;(this||e)._topClusterLevel&&(this||e)._topClusterLevel.getAllChildMarkers(o);for(n=o.length-1;n>=0;n--){r=true;for(s=a.length-1;s>=0;s--)if(a[s].layer===o[n]){r=false;break}r&&t.call(i,o[n])}(this||e)._nonPointGroup.eachLayer(t,i)},getLayers:function(){var e=[];this.eachLayer((function(t){e.push(t)}));return e},getLayer:function(e){var t=null;e=parseInt(e,10);this.eachLayer((function(i){L.stamp(i)===e&&(t=i)}));return t},hasLayer:function(t){if(!t)return false;var i,r=(this||e)._needsClustering;for(i=r.length-1;i>=0;i--)if(r[i]===t)return true;r=(this||e)._needsRemoving;for(i=r.length-1;i>=0;i--)if(r[i].layer===t)return false;return!!(t.__parent&&t.__parent._group===(this||e))||(this||e)._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,i){var r=(this||e)._map;"function"!==typeof i&&(i=function(){});var showMarker=function(){if((r.hasLayer(t)||r.hasLayer(t.__parent))&&!(this||e)._inZoomAnimation){(this||e)._map.off("moveend",showMarker,this||e);this.off("animationend",showMarker,this||e);if(r.hasLayer(t))i();else if(t.__parent._icon){this.once("spiderfied",i,this||e);t.__parent.spiderfy()}}};if(t._icon&&(this||e)._map.getBounds().contains(t.getLatLng()))i();else if(t.__parent._zoom<Math.round((this||e)._map._zoom)){(this||e)._map.on("moveend",showMarker,this||e);(this||e)._map.panTo(t.getLatLng())}else{(this||e)._map.on("moveend",showMarker,this||e);this.on("animationend",showMarker,this||e);t.__parent.zoomToBounds()}},onAdd:function(t){(this||e)._map=t;var i,r,n;if(!isFinite((this||e)._map.getMaxZoom()))throw"Map has no maxZoom specified";(this||e)._featureGroup.addTo(t);(this||e)._nonPointGroup.addTo(t);(this||e)._gridClusters||this._generateInitialClusters();(this||e)._maxLat=t.options.crs.projection.MAX_LATITUDE;for(i=0,r=(this||e)._needsRemoving.length;i<r;i++){n=(this||e)._needsRemoving[i];n.newlatlng=n.layer._latlng;n.layer._latlng=n.latlng}for(i=0,r=(this||e)._needsRemoving.length;i<r;i++){n=(this||e)._needsRemoving[i];this._removeLayer(n.layer,true);n.layer._latlng=n.newlatlng}(this||e)._needsRemoving=[];(this||e)._zoom=Math.round((this||e)._map._zoom);(this||e)._currentShownBounds=this._getExpandedVisibleBounds();(this||e)._map.on("zoomend",(this||e)._zoomEnd,this||e);(this||e)._map.on("moveend",(this||e)._moveEnd,this||e);(this||e)._spiderfierOnAdd&&this._spiderfierOnAdd();this._bindEvents();r=(this||e)._needsClustering;(this||e)._needsClustering=[];this.addLayers(r,true)},onRemove:function(t){t.off("zoomend",(this||e)._zoomEnd,this||e);t.off("moveend",(this||e)._moveEnd,this||e);this._unbindEvents();(this||e)._map._mapPane.className=(this||e)._map._mapPane.className.replace(" leaflet-cluster-anim","");(this||e)._spiderfierOnRemove&&this._spiderfierOnRemove();delete(this||e)._maxLat;this._hideCoverage();(this||e)._featureGroup.remove();(this||e)._nonPointGroup.remove();(this||e)._featureGroup.clearLayers();(this||e)._map=null},getVisibleParent:function(e){var t=e;while(t&&!t._icon)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t){e.splice(i,1);return true}},
/**
     * Removes a marker from all _gridUnclustered zoom levels, starting at the supplied zoom.
     * @param marker to be removed from _gridUnclustered.
     * @param z integer bottom start zoom level (included)
     * @private
     */
_removeFromGridUnclustered:function(t,i){var r=(this||e)._map,n=(this||e)._gridUnclustered,s=Math.floor((this||e)._map.getMinZoom());for(;i>=s;i--)if(!n[i].removeObject(t,r.project(t.getLatLng(),i)))break},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(t){if(!(this||e)._ignoreMove&&!t.target.__dragStart){var i=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng);i&&t.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t;this.removeLayer(e);e._latlng=i;this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart;t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(t,i,r){var n=(this||e)._gridClusters,s=(this||e)._gridUnclustered,o=(this||e)._featureGroup,a=(this||e)._map,l=Math.floor((this||e)._map.getMinZoom());i&&this._removeFromGridUnclustered(t,(this||e)._maxZoom);var h,u=t.__parent,_=u._markers;this._arraySplice(_,t);while(u){u._childCount--;u._boundsNeedUpdate=true;if(u._zoom<l)break;if(i&&u._childCount<=1){h=u._markers[0]===t?u._markers[1]:u._markers[0];n[u._zoom].removeObject(u,a.project(u._cLatLng,u._zoom));s[u._zoom].addObject(h,a.project(h.getLatLng(),u._zoom));this._arraySplice(u.__parent._childClusters,u);u.__parent._markers.push(h);h.__parent=u.__parent;if(u._icon){o.removeLayer(u);r||o.addLayer(h)}}else u._iconNeedsUpdate=true;u=u.__parent}delete t.__parent},_isOrIsParent:function(e,t){while(t){if(e===t)return true;t=t.parentNode}return false},fire:function(t,i,r){if(i&&i.layer instanceof L.MarkerCluster){if(i.originalEvent&&this._isOrIsParent(i.layer._icon,i.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this||e,t,i,r)},listens:function(t,i){return L.FeatureGroup.prototype.listens.call(this||e,t,i)||L.FeatureGroup.prototype.listens.call(this||e,"cluster"+t,i)},_defaultIconCreateFunction:function(e){var t=e.getChildCount();var i=" marker-cluster-";i+=t<10?"small":t<100?"medium":"large";return new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=(this||e)._map,i=(this||e).options.spiderfyOnMaxZoom,r=(this||e).options.showCoverageOnHover,n=(this||e).options.zoomToBoundsOnClick,s=(this||e).options.spiderfyOnEveryZoom;(i||n||s)&&this.on("clusterclick clusterkeypress",(this||e)._zoomOrSpiderfy,this||e);if(r){this.on("clustermouseover",(this||e)._showCoverage,this||e);this.on("clustermouseout",(this||e)._hideCoverage,this||e);t.on("zoomend",(this||e)._hideCoverage,this||e)}},_zoomOrSpiderfy:function(t){var i=t.layer,r=i;if("clusterkeypress"!==t.type||!t.originalEvent||13===t.originalEvent.keyCode){while(1===r._childClusters.length)r=r._childClusters[0];r._zoom===(this||e)._maxZoom&&r._childCount===i._childCount&&(this||e).options.spiderfyOnMaxZoom?i.spiderfy():(this||e).options.zoomToBoundsOnClick&&i.zoomToBounds();(this||e).options.spiderfyOnEveryZoom&&i.spiderfy();t.originalEvent&&13===t.originalEvent.keyCode&&(this||e)._map._container.focus()}},_showCoverage:function(t){var i=(this||e)._map;if(!(this||e)._inZoomAnimation){(this||e)._shownPolygon&&i.removeLayer((this||e)._shownPolygon);if(t.layer.getChildCount()>2&&t.layer!==(this||e)._spiderfied){(this||e)._shownPolygon=new L.Polygon(t.layer.getConvexHull(),(this||e).options.polygonOptions);i.addLayer((this||e)._shownPolygon)}}},_hideCoverage:function(){if((this||e)._shownPolygon){(this||e)._map.removeLayer((this||e)._shownPolygon);(this||e)._shownPolygon=null}},_unbindEvents:function(){var t=(this||e).options.spiderfyOnMaxZoom,i=(this||e).options.showCoverageOnHover,r=(this||e).options.zoomToBoundsOnClick,n=(this||e).options.spiderfyOnEveryZoom,s=(this||e)._map;(t||r||n)&&this.off("clusterclick clusterkeypress",(this||e)._zoomOrSpiderfy,this||e);if(i){this.off("clustermouseover",(this||e)._showCoverage,this||e);this.off("clustermouseout",(this||e)._hideCoverage,this||e);s.off("zoomend",(this||e)._hideCoverage,this||e)}},_zoomEnd:function(){if((this||e)._map){this._mergeSplitClusters();(this||e)._zoom=Math.round((this||e)._map._zoom);(this||e)._currentShownBounds=this._getExpandedVisibleBounds()}},_moveEnd:function(){if(!(this||e)._inZoomAnimation){var t=this._getExpandedVisibleBounds();(this||e)._topClusterLevel._recursivelyRemoveChildrenFromMap((this||e)._currentShownBounds,Math.floor((this||e)._map.getMinZoom()),(this||e)._zoom,t);(this||e)._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round((this||e)._map._zoom),t);(this||e)._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil((this||e)._map.getMaxZoom()),i=Math.floor((this||e)._map.getMinZoom()),r=(this||e).options.maxClusterRadius,n=r;"function"!==typeof r&&(n=function(){return r});null!==(this||e).options.disableClusteringAtZoom&&(t=(this||e).options.disableClusteringAtZoom-1);(this||e)._maxZoom=t;(this||e)._gridClusters={};(this||e)._gridUnclustered={};for(var s=t;s>=i;s--){(this||e)._gridClusters[s]=new L.DistanceGrid(n(s));(this||e)._gridUnclustered[s]=new L.DistanceGrid(n(s))}(this||e)._topClusterLevel=new(this||e)._markerCluster(this||e,i-1)},_addLayer:function(t,i){var r,n,s=(this||e)._gridClusters,o=(this||e)._gridUnclustered,a=Math.floor((this||e)._map.getMinZoom());(this||e).options.singleMarkerMode&&this._overrideMarkerIcon(t);t.on((this||e)._childMarkerEventHandlers,this||e);for(;i>=a;i--){r=(this||e)._map.project(t.getLatLng(),i);var l=s[i].getNearObject(r);if(l){l._addChild(t);t.__parent=l;return}l=o[i].getNearObject(r);if(l){var h=l.__parent;h&&this._removeLayer(l,false);var u=new(this||e)._markerCluster(this||e,i,l,t);s[i].addObject(u,(this||e)._map.project(u._cLatLng,i));l.__parent=u;t.__parent=u;var _=u;for(n=i-1;n>h._zoom;n--){_=new(this||e)._markerCluster(this||e,n,_);s[n].addObject(_,(this||e)._map.project(l.getLatLng(),n))}h._addChild(_);this._removeFromGridUnclustered(l,i);return}o[i].addObject(t,r)}(this||e)._topClusterLevel._addChild(t);t.__parent=(this||e)._topClusterLevel},_refreshClustersIcons:function(){(this||e)._featureGroup.eachLayer((function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()}))},_enqueue:function(t){(this||e)._queue.push(t);(this||e)._queueTimeout||((this||e)._queueTimeout=setTimeout(L.bind((this||e)._processQueue,this||e),300))},_processQueue:function(){for(var t=0;t<(this||e)._queue.length;t++)(this||e)._queue[t].call(this||e);(this||e)._queue.length=0;clearTimeout((this||e)._queueTimeout);(this||e)._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round((this||e)._map._zoom);this._processQueue();if((this||e)._zoom<t&&(this||e)._currentShownBounds.intersects(this._getExpandedVisibleBounds())){this._animationStart();(this||e)._topClusterLevel._recursivelyRemoveChildrenFromMap((this||e)._currentShownBounds,Math.floor((this||e)._map.getMinZoom()),(this||e)._zoom,this._getExpandedVisibleBounds());this._animationZoomIn((this||e)._zoom,t)}else if((this||e)._zoom>t){this._animationStart();this._animationZoomOut((this||e)._zoom,t)}else this._moveEnd()},_getExpandedVisibleBounds:function(){return(this||e).options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat((this||e)._map.getBounds()):this._checkBoundsMaxLat((this||e)._map.getBounds().pad(1)):(this||e)._mapBoundsInfinite},
/**
     * Expands the latitude to Infinity (or -Infinity) if the input bounds reach the map projection maximum defined latitude
     * (in the case of Web/Spherical Mercator, it is 85.0511287798 / see https://en.wikipedia.org/wiki/Web_Mercator#Formulas).
     * Otherwise, the removeOutsideVisibleBounds option will remove markers beyond that limit, whereas the same markers without
     * this option (or outside MCG) will have their position floored (ceiled) by the projection and rendered at that limit,
     * making the user think that MCG "eats" them and never displays them again.
     * @param bounds L.LatLngBounds
     * @returns {L.LatLngBounds}
     * @private
     */
_checkBoundsMaxLat:function(t){var i=(this||e)._maxLat;if(void 0!==i){t.getNorth()>=i&&(t._northEast.lat=Infinity);t.getSouth()<=-i&&(t._southWest.lat=-Infinity)}return t},_animationAddLayerNonAnimated:function(t,i){if(i===t)(this||e)._featureGroup.addLayer(t);else if(2===i._childCount){i._addToMap();var r=i.getAllChildMarkers();(this||e)._featureGroup.removeLayer(r[0]);(this||e)._featureGroup.removeLayer(r[1])}else i._updateIcon()},
/**
     * Extracts individual (i.e. non-group) layers from a Layer Group.
     * @param group to extract layers from.
     * @param output {Array} in which to store the extracted layers.
     * @returns {*|Array}
     * @private
     */
_extractNonGroupLayers:function(e,t){var i,r=e.getLayers(),n=0;t=t||[];for(;n<r.length;n++){i=r[n];i instanceof L.LayerGroup?this._extractNonGroupLayers(i,t):t.push(i)}return t},
/**
     * Implements the singleMarkerMode option.
     * @param layer Marker to re-style using the Clusters iconCreateFunction.
     * @returns {L.Icon} The newly created icon.
     * @private
     */
_overrideMarkerIcon:function(t){var i=t.options.icon=(this||e).options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return i}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-Infinity,-Infinity),new L.LatLng(Infinity,Infinity))});L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,i){(this||e)._topClusterLevel._recursivelyRemoveChildrenFromMap((this||e)._currentShownBounds,Math.floor((this||e)._map.getMinZoom()),t);(this||e)._topClusterLevel._recursivelyAddChildrenToMap(null,i,this._getExpandedVisibleBounds());this.fire("animationend")},_animationZoomOut:function(t,i){(this||e)._topClusterLevel._recursivelyRemoveChildrenFromMap((this||e)._currentShownBounds,Math.floor((this||e)._map.getMinZoom()),t);(this||e)._topClusterLevel._recursivelyAddChildrenToMap(null,i,this._getExpandedVisibleBounds());this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){(this||e)._map._mapPane.className+=" leaflet-cluster-anim";(this||e)._inZoomAnimation++},_animationZoomIn:function(t,i){var r,n=this._getExpandedVisibleBounds(),s=(this||e)._featureGroup,o=Math.floor((this||e)._map.getMinZoom());(this||e)._ignoreMove=true;(this||e)._topClusterLevel._recursively(n,t,o,(function(e){var o,a=e._latlng,l=e._markers;n.contains(a)||(a=null);if(e._isSingleParent()&&t+1===i){s.removeLayer(e);e._recursivelyAddChildrenToMap(null,i,n)}else{e.clusterHide();e._recursivelyAddChildrenToMap(a,i,n)}for(r=l.length-1;r>=0;r--){o=l[r];n.contains(o._latlng)||s.removeLayer(o)}}));this._forceLayout();(this||e)._topClusterLevel._recursivelyBecomeVisible(n,i);s.eachLayer((function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}));(this||e)._topClusterLevel._recursively(n,t,i,(function(e){e._recursivelyRestoreChildPositions(i)}));(this||e)._ignoreMove=false;this._enqueue((function(){(this||e)._topClusterLevel._recursively(n,t,o,(function(e){s.removeLayer(e);e.clusterShow()}));this._animationEnd()}))},_animationZoomOut:function(t,i){this._animationZoomOutSingle((this||e)._topClusterLevel,t-1,i);(this||e)._topClusterLevel._recursivelyAddChildrenToMap(null,i,this._getExpandedVisibleBounds());(this||e)._topClusterLevel._recursivelyRemoveChildrenFromMap((this||e)._currentShownBounds,Math.floor((this||e)._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,i){var r=this||e,n=(this||e)._featureGroup;n.addLayer(t);if(i!==t)if(i._childCount>2){i._updateIcon();this._forceLayout();this._animationStart();t._setPos((this||e)._map.latLngToLayerPoint(i.getLatLng()));t.clusterHide();this._enqueue((function(){n.removeLayer(t);t.clusterShow();r._animationEnd()}))}else{this._forceLayout();r._animationStart();r._animationZoomOutSingle(i,(this||e)._map.getMaxZoom(),(this||e)._zoom)}}},_animationZoomOutSingle:function(t,i,r){var n=this._getExpandedVisibleBounds(),s=Math.floor((this||e)._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,s,i+1,r);var o=this||e;this._forceLayout();t._recursivelyBecomeVisible(n,r);this._enqueue((function(){if(1===t._childCount){var a=t._markers[0];(this||e)._ignoreMove=true;a.setLatLng(a.getLatLng());(this||e)._ignoreMove=false;a.clusterShow&&a.clusterShow()}else t._recursively(n,r,s,(function(e){e._recursivelyRemoveChildrenFromMap(n,s,i+1)}));o._animationEnd()}))},_animationEnd:function(){(this||e)._map&&((this||e)._map._mapPane.className=(this||e)._map._mapPane.className.replace(" leaflet-cluster-anim",""));(this||e)._inZoomAnimation--;this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}});L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var r=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,i,r,n){L.Marker.prototype.initialize.call(this||e,r?r._cLatLng||r.getLatLng():new L.LatLng(0,0),{icon:this||e,pane:t.options.clusterPane});(this||e)._group=t;(this||e)._zoom=i;(this||e)._markers=[];(this||e)._childClusters=[];(this||e)._childCount=0;(this||e)._iconNeedsUpdate=true;(this||e)._boundsNeedUpdate=true;(this||e)._bounds=new L.LatLngBounds;r&&this._addChild(r);n&&this._addChild(n)},getAllChildMarkers:function(t,i){t=t||[];for(var r=(this||e)._childClusters.length-1;r>=0;r--)(this||e)._childClusters[r].getAllChildMarkers(t,i);for(var n=(this||e)._markers.length-1;n>=0;n--)i&&(this||e)._markers[n].__dragStart||t.push((this||e)._markers[n]);return t},getChildCount:function(){return(this||e)._childCount},zoomToBounds:function(t){var i,r=(this||e)._childClusters.slice(),n=(this||e)._group._map,s=n.getBoundsZoom((this||e)._bounds),o=(this||e)._zoom+1,a=n.getZoom();while(r.length>0&&s>o){o++;var l=[];for(i=0;i<r.length;i++)l=l.concat(r[i]._childClusters);r=l}s>o?(this||e)._group._map.setView((this||e)._latlng,o):s<=a?(this||e)._group._map.setView((this||e)._latlng,a+1):(this||e)._group._map.fitBounds((this||e)._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;t.extend((this||e)._bounds);return t},_updateIcon:function(){(this||e)._iconNeedsUpdate=true;(this||e)._icon&&this.setIcon(this||e)},createIcon:function(){if((this||e)._iconNeedsUpdate){(this||e)._iconObj=(this||e)._group.options.iconCreateFunction(this||e);(this||e)._iconNeedsUpdate=false}return(this||e)._iconObj.createIcon()},createShadow:function(){return(this||e)._iconObj.createShadow()},_addChild:function(t,i){(this||e)._iconNeedsUpdate=true;(this||e)._boundsNeedUpdate=true;this._setClusterCenter(t);if(t instanceof L.MarkerCluster){if(!i){(this||e)._childClusters.push(t);t.__parent=this||e}(this||e)._childCount+=t._childCount}else{i||(this||e)._markers.push(t);(this||e)._childCount++}(this||e).__parent&&(this||e).__parent._addChild(t,true)},
/**
     * Makes sure the cluster center is set. If not, uses the child center if it is a cluster, or the marker position.
     * @param child L.MarkerCluster|L.Marker that will be used as cluster center if not defined yet.
     * @private
     */
_setClusterCenter:function(t){(this||e)._cLatLng||((this||e)._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=(this||e)._bounds;if(t._southWest){t._southWest.lat=Infinity;t._southWest.lng=Infinity}if(t._northEast){t._northEast.lat=-Infinity;t._northEast.lng=-Infinity}},_recalculateBounds:function(){var t,i,r,n,s=(this||e)._markers,o=(this||e)._childClusters,a=0,l=0,h=(this||e)._childCount;if(0!==h){this._resetBounds();for(t=0;t<s.length;t++){r=s[t]._latlng;(this||e)._bounds.extend(r);a+=r.lat;l+=r.lng}for(t=0;t<o.length;t++){i=o[t];i._boundsNeedUpdate&&i._recalculateBounds();(this||e)._bounds.extend(i._bounds);r=i._wLatLng;n=i._childCount;a+=r.lat*n;l+=r.lng*n}(this||e)._latlng=(this||e)._wLatLng=new L.LatLng(a/h,l/h);(this||e)._boundsNeedUpdate=false}},_addToMap:function(t){if(t){(this||e)._backupLatlng=(this||e)._latlng;this.setLatLng(t)}(this||e)._group._featureGroup.addLayer(this||e)},_recursivelyAnimateChildrenIn:function(t,i,r){this._recursively(t,(this||e)._group._map.getMinZoom(),r-1,(function(e){var t,r,n=e._markers;for(t=n.length-1;t>=0;t--){r=n[t];if(r._icon){r._setPos(i);r.clusterHide()}}}),(function(e){var t,r,n=e._childClusters;for(t=n.length-1;t>=0;t--){r=n[t];if(r._icon){r._setPos(i);r.clusterHide()}}}))},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,i,r){this._recursively(e,r,t,(function(n){n._recursivelyAnimateChildrenIn(e,n._group._map.latLngToLayerPoint(n.getLatLng()).round(),i);if(n._isSingleParent()&&i-1===r){n.clusterShow();n._recursivelyRemoveChildrenFromMap(e,t,i)}else n.clusterHide();n._addToMap()}))},_recursivelyBecomeVisible:function(t,i){this._recursively(t,(this||e)._group._map.getMinZoom(),i,null,(function(e){e.clusterShow()}))},_recursivelyAddChildrenToMap:function(t,i,r){this._recursively(r,(this||e)._group._map.getMinZoom()-1,i,(function(e){if(i!==e._zoom)for(var n=e._markers.length-1;n>=0;n--){var s=e._markers[n];if(r.contains(s._latlng)){if(t){s._backupLatlng=s.getLatLng();s.setLatLng(t);s.clusterHide&&s.clusterHide()}e._group._featureGroup.addLayer(s)}}}),(function(e){e._addToMap(t)}))},_recursivelyRestoreChildPositions:function(t){for(var i=(this||e)._markers.length-1;i>=0;i--){var r=(this||e)._markers[i];if(r._backupLatlng){r.setLatLng(r._backupLatlng);delete r._backupLatlng}}if(t-1===(this||e)._zoom)for(var n=(this||e)._childClusters.length-1;n>=0;n--)(this||e)._childClusters[n]._restorePosition();else for(var s=(this||e)._childClusters.length-1;s>=0;s--)(this||e)._childClusters[s]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){if((this||e)._backupLatlng){this.setLatLng((this||e)._backupLatlng);delete(this||e)._backupLatlng}},_recursivelyRemoveChildrenFromMap:function(e,t,i,r){var n,s;this._recursively(e,t-1,i-1,(function(e){for(s=e._markers.length-1;s>=0;s--){n=e._markers[s];if(!r||!r.contains(n._latlng)){e._group._featureGroup.removeLayer(n);n.clusterShow&&n.clusterShow()}}}),(function(e){for(s=e._childClusters.length-1;s>=0;s--){n=e._childClusters[s];if(!r||!r.contains(n._latlng)){e._group._featureGroup.removeLayer(n);n.clusterShow&&n.clusterShow()}}}))},_recursively:function(t,i,r,n,s){var o,a,l=(this||e)._childClusters,h=(this||e)._zoom;if(i<=h){n&&n(this||e);s&&h===r&&s(this||e)}if(h<i||h<r)for(o=l.length-1;o>=0;o--){a=l[o];a._boundsNeedUpdate&&a._recalculateBounds();t.intersects(a._bounds)&&a._recursively(t,i,r,n,s)}},_isSingleParent:function(){return(this||e)._childClusters.length>0&&(this||e)._childClusters[0]._childCount===(this||e)._childCount}});L.Marker.include({clusterHide:function(){var t=(this||e).options.opacity;this.setOpacity(0);(this||e).options.opacity=t;return this||e},clusterShow:function(){return this.setOpacity((this||e).options.opacity)}});L.DistanceGrid=function(t){(this||e)._cellSize=t;(this||e)._sqCellSize=t*t;(this||e)._grid={};(this||e)._objectPoint={}};L.DistanceGrid.prototype={addObject:function(t,i){var r=this._getCoord(i.x),n=this._getCoord(i.y),s=(this||e)._grid,o=s[n]=s[n]||{},a=o[r]=o[r]||[],l=L.Util.stamp(t);(this||e)._objectPoint[l]=i;a.push(t)},updateObject:function(e,t){this.removeObject(e);this.addObject(e,t)},removeObject:function(t,i){var r,n,s=this._getCoord(i.x),o=this._getCoord(i.y),a=(this||e)._grid,l=a[o]=a[o]||{},h=l[s]=l[s]||[];delete(this||e)._objectPoint[L.Util.stamp(t)];for(r=0,n=h.length;r<n;r++)if(h[r]===t){h.splice(r,1);1===n&&delete l[s];return true}},eachObject:function(t,i){var r,n,s,o,a,l,h,u=(this||e)._grid;for(r in u){a=u[r];for(n in a){l=a[n];for(s=0,o=l.length;s<o;s++){h=t.call(i,l[s]);if(h){s--;o--}}}}},getNearObject:function(t){var i,r,n,s,o,a,l,h,u=this._getCoord(t.x),_=this._getCoord(t.y),d=(this||e)._objectPoint,f=(this||e)._sqCellSize,p=null;for(i=_-1;i<=_+1;i++){s=(this||e)._grid[i];if(s)for(r=u-1;r<=u+1;r++){o=s[r];if(o)for(n=0,a=o.length;n<a;n++){l=o[n];h=this._sqDist(d[L.Util.stamp(l)],t);if(h<f||h<=f&&null===p){f=h;p=l}}}}return p},_getCoord:function(t){var i=Math.floor(t/(this||e)._cellSize);return isFinite(i)?i:t},_sqDist:function(e,t){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r}};(function(){L.QuickHull={
/*
       * @param {Object} cpt a point to be measured from the baseline
       * @param {Array} bl the baseline, as represented by a two-element
       *   array of latlng objects.
       * @returns {Number} an approximate distance measure
       */
getDistant:function(e,t){var i=t[1].lat-t[0].lat,r=t[0].lng-t[1].lng;return r*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},
/*
       * @param {Array} baseLine a two-element array of latlng objects
       *   representing the baseline to project from
       * @param {Array} latLngs an array of latlng objects
       * @returns {Object} the maximum point and all new points to stay
       *   in consideration for the hull.
       */
findMostDistantPointFromBaseLine:function(e,t){var i,r,n,s=0,o=null,a=[];for(i=t.length-1;i>=0;i--){r=t[i];n=this.getDistant(r,e);if(n>0){a.push(r);if(n>s){s=n;o=r}}}return{maxPoint:o,newPoints:a}},
/*
       * Given a baseline, compute the convex hull of latLngs as an array
       * of latLngs.
       *
       * @param {Array} latLngs
       * @returns {Array}
       */
buildConvexHull:function(e,t){var i=[],r=this.findMostDistantPointFromBaseLine(e,t);if(r.maxPoint){i=i.concat(this.buildConvexHull([e[0],r.maxPoint],r.newPoints));i=i.concat(this.buildConvexHull([r.maxPoint,e[1]],r.newPoints));return i}return[e[0]]},
/*
       * Given an array of latlngs, compute a convex hull as an array
       * of latlngs
       *
       * @param {Array} latLngs
       * @returns {Array}
       */
getConvexHull:function(e){var t,i=false,r=false,n=false,s=false,o=null,a=null,l=null,h=null,u=null,_=null;for(t=e.length-1;t>=0;t--){var d=e[t];if(false===i||d.lat>i){o=d;i=d.lat}if(false===r||d.lat<r){a=d;r=d.lat}if(false===n||d.lng>n){l=d;n=d.lng}if(false===s||d.lng<s){h=d;s=d.lng}}if(r!==i){_=a;u=o}else{_=h;u=l}var f=[].concat(this.buildConvexHull([_,u],e),this.buildConvexHull([u,_],e));return f}}})();L.MarkerCluster.include({getConvexHull:function(){var e,t,i=this.getAllChildMarkers(),r=[];for(t=i.length-1;t>=0;t--){e=i[t].getLatLng();r.push(e)}return L.QuickHull.getConvexHull(r)}});L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if((this||e)._group._spiderfied!==(this||e)&&!(this||e)._group._inZoomAnimation){var t,i=this.getAllChildMarkers(null,true),r=(this||e)._group,n=r._map,s=n.latLngToLayerPoint((this||e)._latlng);(this||e)._group._unspiderfy();(this||e)._group._spiderfied=this||e;if((this||e)._group.options.spiderfyShapePositions)t=(this||e)._group.options.spiderfyShapePositions(i.length,s);else if(i.length>=(this||e)._circleSpiralSwitchover)t=this._generatePointsSpiral(i.length,s);else{s.y+=10;t=this._generatePointsCircle(i.length,s)}this._animationSpiderfy(i,t)}},unspiderfy:function(t){if(!(this||e)._group._inZoomAnimation){this._animationUnspiderfy(t);(this||e)._group._spiderfied=null}},_generatePointsCircle:function(t,i){var r,n,s=(this||e)._group.options.spiderfyDistanceMultiplier*(this||e)._circleFootSeparation*(2+t),o=s/(this||e)._2PI,a=(this||e)._2PI/t,l=[];o=Math.max(o,35);l.length=t;for(r=0;r<t;r++){n=(this||e)._circleStartAngle+r*a;l[r]=new L.Point(i.x+o*Math.cos(n),i.y+o*Math.sin(n))._round()}return l},_generatePointsSpiral:function(t,i){var r,n=(this||e)._group.options.spiderfyDistanceMultiplier,s=n*(this||e)._spiralLengthStart,o=n*(this||e)._spiralFootSeparation,a=n*(this||e)._spiralLengthFactor*(this||e)._2PI,l=0,h=[];h.length=t;for(r=t;r>=0;r--){r<t&&(h[r]=new L.Point(i.x+s*Math.cos(l),i.y+s*Math.sin(l))._round());l+=o/s+5e-4*r;s+=a/l}return h},_noanimationUnspiderfy:function(){var t,i,r=(this||e)._group,n=r._map,s=r._featureGroup,o=this.getAllChildMarkers(null,true);r._ignoreMove=true;this.setOpacity(1);for(i=o.length-1;i>=0;i--){t=o[i];s.removeLayer(t);if(t._preSpiderfyLatlng){t.setLatLng(t._preSpiderfyLatlng);delete t._preSpiderfyLatlng}t.setZIndexOffset&&t.setZIndexOffset(0);if(t._spiderLeg){n.removeLayer(t._spiderLeg);delete t._spiderLeg}}r.fire("unspiderfied",{cluster:this||e,markers:o});r._ignoreMove=false;r._spiderfied=null}});L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,i){var r,n,s,o,a=(this||e)._group,l=a._map,h=a._featureGroup,u=(this||e)._group.options.spiderLegPolylineOptions;a._ignoreMove=true;for(r=0;r<t.length;r++){o=l.layerPointToLatLng(i[r]);n=t[r];s=new L.Polyline([(this||e)._latlng,o],u);l.addLayer(s);n._spiderLeg=s;n._preSpiderfyLatlng=n._latlng;n.setLatLng(o);n.setZIndexOffset&&n.setZIndexOffset(1e6);h.addLayer(n)}this.setOpacity(.3);a._ignoreMove=false;a.fire("spiderfied",{cluster:this||e,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}});L.MarkerCluster.include({_animationSpiderfy:function(t,i){var r,n,s,o,a,l,h=this||e,u=(this||e)._group,_=u._map,d=u._featureGroup,f=(this||e)._latlng,p=_.latLngToLayerPoint(f),c=L.Path.SVG,m=L.extend({},(this||e)._group.options.spiderLegPolylineOptions),g=m.opacity;void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity);if(c){m.opacity=0;m.className=(m.className||"")+" leaflet-cluster-spider-leg"}else m.opacity=g;u._ignoreMove=true;for(r=0;r<t.length;r++){n=t[r];l=_.layerPointToLatLng(i[r]);s=new L.Polyline([f,l],m);_.addLayer(s);n._spiderLeg=s;if(c){o=s._path;a=o.getTotalLength()+.1;o.style.strokeDasharray=a;o.style.strokeDashoffset=a}n.setZIndexOffset&&n.setZIndexOffset(1e6);n.clusterHide&&n.clusterHide();d.addLayer(n);n._setPos&&n._setPos(p)}u._forceLayout();u._animationStart();for(r=t.length-1;r>=0;r--){l=_.layerPointToLatLng(i[r]);n=t[r];n._preSpiderfyLatlng=n._latlng;n.setLatLng(l);n.clusterShow&&n.clusterShow();if(c){s=n._spiderLeg;o=s._path;o.style.strokeDashoffset=0;s.setStyle({opacity:g})}}this.setOpacity(.3);u._ignoreMove=false;setTimeout((function(){u._animationEnd();u.fire("spiderfied",{cluster:h,markers:t})}),200)},_animationUnspiderfy:function(t){var i,r,n,s,o,a,l=this||e,h=(this||e)._group,u=h._map,_=h._featureGroup,d=t?u._latLngToNewLayerPoint((this||e)._latlng,t.zoom,t.center):u.latLngToLayerPoint((this||e)._latlng),f=this.getAllChildMarkers(null,true),p=L.Path.SVG;h._ignoreMove=true;h._animationStart();this.setOpacity(1);for(r=f.length-1;r>=0;r--){i=f[r];if(i._preSpiderfyLatlng){i.closePopup();i.setLatLng(i._preSpiderfyLatlng);delete i._preSpiderfyLatlng;a=true;if(i._setPos){i._setPos(d);a=false}if(i.clusterHide){i.clusterHide();a=false}a&&_.removeLayer(i);if(p){n=i._spiderLeg;s=n._path;o=s.getTotalLength()+.1;s.style.strokeDashoffset=o;n.setStyle({opacity:0})}}}h._ignoreMove=false;setTimeout((function(){var e=0;for(r=f.length-1;r>=0;r--){i=f[r];i._spiderLeg&&e++}for(r=f.length-1;r>=0;r--){i=f[r];if(i._spiderLeg){i.clusterShow&&i.clusterShow();i.setZIndexOffset&&i.setZIndexOffset(0);e>1&&_.removeLayer(i);u.removeLayer(i._spiderLeg);delete i._spiderLeg}}h._animationEnd();h.fire("unspiderfied",{cluster:l,markers:f})}),200)}});L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){(this||e)._unspiderfy.apply(this||e,arguments)},_spiderfierOnAdd:function(){(this||e)._map.on("click",(this||e)._unspiderfyWrapper,this||e);(this||e)._map.options.zoomAnimation&&(this||e)._map.on("zoomstart",(this||e)._unspiderfyZoomStart,this||e);(this||e)._map.on("zoomend",(this||e)._noanimationUnspiderfy,this||e);L.Browser.touch||(this||e)._map.getRenderer(this||e)},_spiderfierOnRemove:function(){(this||e)._map.off("click",(this||e)._unspiderfyWrapper,this||e);(this||e)._map.off("zoomstart",(this||e)._unspiderfyZoomStart,this||e);(this||e)._map.off("zoomanim",(this||e)._unspiderfyZoomAnim,this||e);(this||e)._map.off("zoomend",(this||e)._noanimationUnspiderfy,this||e);this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){(this||e)._map&&(this||e)._map.on("zoomanim",(this||e)._unspiderfyZoomAnim,this||e)},_unspiderfyZoomAnim:function(t){if(!L.DomUtil.hasClass((this||e)._map._mapPane,"leaflet-touching")){(this||e)._map.off("zoomanim",(this||e)._unspiderfyZoomAnim,this||e);this._unspiderfy(t)}},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){(this||e)._spiderfied&&(this||e)._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){(this||e)._spiderfied&&(this||e)._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){if(t._spiderLeg){(this||e)._featureGroup.removeLayer(t);t.clusterShow&&t.clusterShow();t.setZIndexOffset&&t.setZIndexOffset(0);(this||e)._map.removeLayer(t._spiderLeg);delete t._spiderLeg}}});L.MarkerClusterGroup.include({
/**
     * Updates the icon of all clusters which are parents of the given marker(s).
     * In singleMarkerMode, also updates the given marker(s) icon.
     * @param layers L.MarkerClusterGroup|L.LayerGroup|Array(L.Marker)|Map(L.Marker)|
     * L.MarkerCluster|L.Marker (optional) list of markers (or single marker) whose parent
     * clusters need to be updated. If not provided, retrieves all child markers of this.
     * @returns {L.MarkerClusterGroup}
     */
refreshClusters:function(t){t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=(this||e)._topClusterLevel.getAllChildMarkers();this._flagParentsIconsNeedUpdate(t);this._refreshClustersIcons();(this||e).options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t);return this||e},
/**
     * Simply flags all parent clusters of the given markers as having a "dirty" icon.
     * @param layers Array(L.Marker)|Map(L.Marker) list of markers.
     * @private
     */
_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e){i=e[t].__parent;while(i){i._iconNeedsUpdate=true;i=i.__parent}}},
/**
     * Re-draws the icon of the supplied markers.
     * To be used in singleMarkerMode only.
     * @param layers Array(L.Marker)|Map(L.Marker) list of markers.
     * @private
     */
_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e){i=e[t];this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}});L.Marker.include({
/**
     * Updates the given options in the marker's icon and refreshes the marker.
     * @param options map object of icon options.
     * @param directlyRefreshClusters boolean (optional) true to trigger
     * MCG.refreshClustersOf() right away with this single marker.
     * @returns {L.Marker}
     */
refreshIconOptions:function(t,i){var r=(this||e).options.icon;L.setOptions(r,t);this.setIcon(r);i&&(this||e).__parent&&(this||e).__parent._group.refreshClusters(this||e);return this||e}});t.MarkerClusterGroup=i;t.MarkerCluster=r;Object.defineProperty(t,"__esModule",{value:true})}));const i=t.MarkerClusterGroup,r=t.MarkerCluster,n=t.__esModule;export{r as MarkerCluster,i as MarkerClusterGroup,n as __esModule,t as default};

